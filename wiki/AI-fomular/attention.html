
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¸ä¹°æ¡‚èŠ±åŒè½½é…’ - å¿ƒä¹‹æ‰€å‘ï¼Œç´ å±¥ä»¥å¾€</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Zebin, Blog, ç¼–ç¨‹, ç”Ÿæ´», æŠ€æœ¯,"> 
    <meta name="description" content="è¿™æ˜¯Zebin Gaoçš„ä¸ªäººåšå®¢ï¼Œè®°å½•å…³äºç¼–ç¨‹æŠ€æœ¯ã€ç”Ÿæ´»éšç¬”å’Œè¯»ä¹¦çš„å†…å®¹ã€‚,"> 
    <meta name="author" content="Zebin Gao"> 
    <link rel="alternative" href="atom.xml" title="ä¸ä¹°æ¡‚èŠ±åŒè½½é…’" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

    
    
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="ä¸ä¹°æ¡‚èŠ±åŒè½½é…’ - å¿ƒä¹‹æ‰€å‘ï¼Œç´ å±¥ä»¥å¾€"/>
    <meta name="twitter:description" content="è¿™æ˜¯Zebin Gaoçš„ä¸ªäººåšå®¢ï¼Œè®°å½•å…³äºç¼–ç¨‹æŠ€æœ¯ã€ç”Ÿæ´»éšç¬”å’Œè¯»ä¹¦çš„å†…å®¹ã€‚,"/>
    
    
    
    
    <meta property="og:site_name" content="ä¸ä¹°æ¡‚èŠ±åŒè½½é…’"/>
    <meta property="og:type" content="object"/>
    <meta property="og:title" content="ä¸ä¹°æ¡‚èŠ±åŒè½½é…’ - å¿ƒä¹‹æ‰€å‘ï¼Œç´ å±¥ä»¥å¾€"/>
    <meta property="og:description" content="è¿™æ˜¯Zebin Gaoçš„ä¸ªäººåšå®¢ï¼Œè®°å½•å…³äºç¼–ç¨‹æŠ€æœ¯ã€ç”Ÿæ´»éšç¬”å’Œè¯»ä¹¦çš„å†…å®¹ã€‚,"/>
    
<link rel="stylesheet" href="/css/diaspora.css">

    <script>window.searchDbPath = "/search.xml";</script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet">
<meta name="generator" content="Hexo 7.3.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">ä¸ä¹°æ¡‚èŠ±åŒè½½é…’</span>
    <div id="loader"></div>
    <div id="single" class="page">
    <div id="top">
        <a class="iconfont icon-left image-icon" href="javascript:history.back()"></a>
    </div>
    <div class="section">
        <div class="article">
            <div class="main">
                <div class="content">
                
                        <p>è¿™é‡Œæ‰æ˜¯æ­£æ–‡â€¦</p>
<h1 id="ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›"><a href="#ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›" class="headerlink" title="ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›"></a>ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›</h1><p>$$\text{Attention}(Q, K, V) &#x3D; \text{softmax}\left(\frac{QK^T}{\sqrt{d_k}}\right)V$$</p>
<ul>
<li>$Q$ (Query): ä½ çš„æŸ¥è¯¢æ„å›¾ã€‚æ¯”å¦‚ä½ æ‰‹é‡Œæ‹¿ç€ä¸€å¼ å†™ç€â€œå“ˆåˆ©æ³¢ç‰¹â€çš„çº¸æ¡ã€‚</li>
<li>$K$ (Key): å›¾ä¹¦çš„ç´¢å¼•&#x2F;æ ‡ç­¾ã€‚å›¾ä¹¦é¦†é‡Œæ¯æœ¬ä¹¦è„Šä¸Šè´´çš„æ ‡ç­¾ï¼Œæ¯”å¦‚â€œç§‘å¹»â€ã€â€œé­”æ³•â€ã€â€œä¼ è®°â€ã€‚</li>
<li>$V$ (Value): ä¹¦çš„å†…å®¹æœ¬èº«ã€‚ä¹¦é‡Œå…·ä½“çš„æ–‡å­—ä¿¡æ¯ã€‚</li>
</ul>
<p>è¿™æ˜¯ä¸€ä¸ªæç®€çš„æ•°å€¼ä¾‹å­ï¼Œæ¨¡æ‹Ÿ Transformer å†…éƒ¨åœ¨å¤„ç†ä¸¤ä¸ªå•è¯æ—¶ï¼Œæ˜¯å¦‚ä½•é€šè¿‡ <strong>â€œç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›â€ (Scaled Dot-Product Attention)</strong> è®¡ç®—å‡ºç»“æœçš„ã€‚</p>
<h2 id="åœºæ™¯è®¾å®š"><a href="#åœºæ™¯è®¾å®š" class="headerlink" title="åœºæ™¯è®¾å®š"></a>åœºæ™¯è®¾å®š</h2><ul>
<li><strong>è¾“å…¥å•è¯</strong>ï¼š<code>Thinking</code> å’Œ <code>Machines</code></li>
<li><strong>ç›®æ ‡</strong>ï¼šè®¡ç®—ç¬¬ä¸€ä¸ªå•è¯ <strong>â€œThinkingâ€</strong> çš„æ³¨æ„åŠ›è¾“å‡ºï¼ˆå³ï¼šå®ƒåœ¨ç»“åˆäº†ä¸Šä¸‹æ–‡ â€œMachinesâ€ åï¼Œå˜æˆäº†ä»€ä¹ˆæ ·çš„æ–°å‘é‡ï¼‰ã€‚</li>
<li><strong>å‚æ•°å‡è®¾</strong>ï¼šä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œå‡è®¾åµŒå…¥ç»´åº¦ $d_k &#x3D; 2$ã€‚</li>
</ul>
<hr>
<h2 id="0-å‡†å¤‡æ•°æ®-Q-K-V"><a href="#0-å‡†å¤‡æ•°æ®-Q-K-V" class="headerlink" title="0. å‡†å¤‡æ•°æ® ($Q, K, V$)"></a>0. å‡†å¤‡æ•°æ® ($Q, K, V$)</h2><p>åœ¨çœŸå®æ¨¡å‹ä¸­ï¼Œ$Q, K, V$ æ˜¯é€šè¿‡è¾“å…¥å‘é‡ä¹˜ä»¥æƒé‡çŸ©é˜µ $W^Q, W^K, W^V$ å¾—åˆ°çš„ã€‚è¿™é‡Œæˆ‘ä»¬ç›´æ¥ç»™å‡ºç»“æœå‘é‡ï¼š</p>
<ul>
<li><strong>Query ($Q$)</strong>: ä»£è¡¨ â€œThinkingâ€ å»æŸ¥è¯¢åˆ«äººçš„æ„å›¾ã€‚<ul>
<li>$q_1 &#x3D; [1, 2]$</li>
</ul>
</li>
<li><strong>Keys ($K$)</strong>: ä»£è¡¨ â€œThinkingâ€ å’Œ â€œMachinesâ€ ä¾›åˆ«äººæŸ¥è¯¢çš„æ ‡ç­¾ã€‚<ul>
<li>$k_1$ (Thinking) $&#x3D; [1, 2]$</li>
<li>$k_2$ (Machines) $&#x3D; [0, 1]$</li>
</ul>
</li>
<li><strong>Values ($V$)</strong>: ä»£è¡¨è¿™ä¸¤ä¸ªè¯å®é™…åŒ…å«çš„ä¿¡æ¯å†…å®¹ã€‚<ul>
<li>$v_1$ (Thinking) $&#x3D; [10, 20]$</li>
<li>$v_2$ (Machines) $&#x3D; [30, 40]$</li>
</ul>
</li>
</ul>
<hr>
<h2 id="1-ç¬¬ä¸€æ­¥ï¼šç‚¹ç§¯-QK-T-â€”â€”-è®¡ç®—ç›¸ä¼¼åº¦"><a href="#1-ç¬¬ä¸€æ­¥ï¼šç‚¹ç§¯-QK-T-â€”â€”-è®¡ç®—ç›¸ä¼¼åº¦" class="headerlink" title="1. ç¬¬ä¸€æ­¥ï¼šç‚¹ç§¯ ($QK^T$) â€”â€” è®¡ç®—ç›¸ä¼¼åº¦"></a>1. ç¬¬ä¸€æ­¥ï¼šç‚¹ç§¯ ($QK^T$) â€”â€” è®¡ç®—ç›¸ä¼¼åº¦</h2><p>æ‹¿ç€ $q_1$ å»å’Œæ‰€æœ‰çš„ $k$ è¿›è¡Œç‚¹ç§¯ï¼Œçœ‹çœ‹ â€œThinkingâ€ å’Œè¿™å¥è¯é‡Œçš„æ¯ä¸ªè¯æœ‰å¤šç›¸å…³ã€‚</p>
<ul>
<li><p><strong>ä¸è‡ªå·±ç‚¹ç§¯</strong> ($q_1 \cdot k_1$):<br>  $$1 \times 1 + 2 \times 2 &#x3D; 1 + 4 &#x3D; \mathbf{5}$$</p>
</li>
<li><p><strong>ä¸ â€œMachinesâ€ ç‚¹ç§¯</strong> ($q_1 \cdot k_2$):<br>  $$1 \times 0 + 2 \times 1 &#x3D; 0 + 2 &#x3D; \mathbf{2}$$</p>
</li>
</ul>
<p><strong>å½“å‰ç»“æœå‘é‡ï¼š</strong> $[5, 2]$</p>
<blockquote>
<p><strong>ğŸ’¡ è§£è¯»</strong>ï¼šåˆ†æ•°è¶Šé«˜ï¼Œä»£è¡¨ç›¸å…³æ€§è¶Šé«˜ã€‚Thinking å…³æ³¨è‡ªå·± 5 åˆ†ï¼Œå…³æ³¨ Machines 2 åˆ†ã€‚</p>
</blockquote>
<hr>
<h2 id="2-ç¬¬äºŒæ­¥ï¼šç¼©æ”¾-Scaling"><a href="#2-ç¬¬äºŒæ­¥ï¼šç¼©æ”¾-Scaling" class="headerlink" title="2. ç¬¬äºŒæ­¥ï¼šç¼©æ”¾ (Scaling)"></a>2. ç¬¬äºŒæ­¥ï¼šç¼©æ”¾ (Scaling)</h2><p>å…¬å¼è¦æ±‚é™¤ä»¥ $\sqrt{d_k}$ã€‚å› ä¸ºæˆ‘ä»¬è®¾å®š $d_k&#x3D;4$ (ä¸ºç®€åŒ–æ¼”ç¤ºï¼Œæ­¤å¤„å‡è®¾æ ¹å·åä¸º2)ï¼Œæ‰€ä»¥ $\sqrt{d_k}&#x3D;2$ã€‚</p>
<p>$$<br>[5, 2] \div 2 &#x3D; [\mathbf{2.5}, \mathbf{1.0}]<br>$$</p>
<p><strong>å½“å‰ç»“æœå‘é‡ï¼š</strong> $[2.5, 1.0]$</p>
<blockquote>
<p><strong>ğŸ’¡ è§£è¯»</strong>ï¼šè¿™ä¸€æ­¥æ˜¯ä¸ºäº†é˜²æ­¢æ•°å€¼è¿‡å¤§ï¼Œå¯¼è‡´ä¸‹ä¸€æ­¥ Softmax æ¢¯åº¦æ¶ˆå¤±ã€‚</p>
</blockquote>
<hr>
<h2 id="3-ç¬¬ä¸‰æ­¥ï¼šSoftmax-â€”â€”-å½’ä¸€åŒ–ä¸ºæ¦‚ç‡"><a href="#3-ç¬¬ä¸‰æ­¥ï¼šSoftmax-â€”â€”-å½’ä¸€åŒ–ä¸ºæ¦‚ç‡" class="headerlink" title="3. ç¬¬ä¸‰æ­¥ï¼šSoftmax â€”â€” å½’ä¸€åŒ–ä¸ºæ¦‚ç‡"></a>3. ç¬¬ä¸‰æ­¥ï¼šSoftmax â€”â€” å½’ä¸€åŒ–ä¸ºæ¦‚ç‡</h2><p>æˆ‘ä»¬éœ€è¦æŠŠåˆ†æ•°å˜æˆç™¾åˆ†æ¯”ï¼ˆæƒé‡ï¼‰ï¼Œè®©å®ƒä»¬çš„å’Œä¸º 1ã€‚å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>$$<br>\text{softmax}(x_i) &#x3D; \frac{e^{x_i}}{\sum e^{x_j}}<br>$$</p>
<p><strong>è®¡ç®—è¿‡ç¨‹ï¼š</strong></p>
<ol>
<li>$e^{2.5} \approx 12.18$</li>
<li>$e^{1.0} \approx 2.71$</li>
<li>æ€»å’Œ $&#x3D; 12.18 + 2.71 &#x3D; 14.89$</li>
</ol>
<p><strong>è®¡ç®—æƒé‡ï¼š</strong></p>
<ul>
<li>$w_1$ (å¯¹è‡ªå·±): $12.18 &#x2F; 14.89 \approx \mathbf{0.82}$</li>
<li>$w_2$ (å¯¹ Machines): $2.71 &#x2F; 14.89 \approx \mathbf{0.18}$</li>
</ul>
<p><strong>å½“å‰æ³¨æ„åŠ›æƒé‡ï¼š</strong> $[0.82, 0.18]$</p>
<blockquote>
<p><strong>ğŸ’¡ è§£è¯»</strong>ï¼šè¿™æ„å‘³ç€åœ¨ç†è§£ â€œThinkingâ€ è¿™ä¸ªè¯æ—¶ï¼Œæ¨¡å‹å†³å®šä¿ç•™ <strong>82%</strong> çš„â€œæœ¬æ„â€ï¼Œå¹¶æ··å…¥ <strong>18%</strong> çš„ â€œMachinesâ€ çš„å«ä¹‰ã€‚</p>
</blockquote>
<hr>
<h2 id="4-ç¬¬å››æ­¥ï¼šåŠ æƒæ±‚å’Œ-dots-times-V"><a href="#4-ç¬¬å››æ­¥ï¼šåŠ æƒæ±‚å’Œ-dots-times-V" class="headerlink" title="4. ç¬¬å››æ­¥ï¼šåŠ æƒæ±‚å’Œ ($\dots \times V$)"></a>4. ç¬¬å››æ­¥ï¼šåŠ æƒæ±‚å’Œ ($\dots \times V$)</h2><p>æœ€åï¼Œç”¨è®¡ç®—å‡ºçš„æƒé‡ï¼Œå»æ··åˆ $V$ (å®é™…å†…å®¹)ã€‚</p>
<p>$$<br>\text{Output} &#x3D; 0.82 \times v_1 + 0.18 \times v_2<br>$$</p>
<p>ä»£å…¥æ•°æ® ($v_1&#x3D;[10, 20], v_2&#x3D;[30, 40]$)ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€ç»´</strong>ï¼š$0.82 \times 10 + 0.18 \times 30 &#x3D; 8.2 + 5.4 &#x3D; \mathbf{13.6}$</li>
<li><strong>ç¬¬äºŒç»´</strong>ï¼š$0.82 \times 20 + 0.18 \times 40 &#x3D; 16.4 + 7.2 &#x3D; \mathbf{23.6}$</li>
</ul>
<h3 id="âœ…-æœ€ç»ˆç»“æœ"><a href="#âœ…-æœ€ç»ˆç»“æœ" class="headerlink" title="âœ… æœ€ç»ˆç»“æœ"></a>âœ… æœ€ç»ˆç»“æœ</h3><p>$$<br>\text{Attention Output} &#x3D; [\mathbf{13.6}, \mathbf{23.6}]<br>$$</p>
<hr>
<h2 id="æ€»ç»“ï¼šè¿™ä¸ªç»“æœæ„å‘³ç€ä»€ä¹ˆï¼Ÿ"><a href="#æ€»ç»“ï¼šè¿™ä¸ªç»“æœæ„å‘³ç€ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ€»ç»“ï¼šè¿™ä¸ªç»“æœæ„å‘³ç€ä»€ä¹ˆï¼Ÿ"></a>æ€»ç»“ï¼šè¿™ä¸ªç»“æœæ„å‘³ç€ä»€ä¹ˆï¼Ÿ</h2><ol>
<li><strong>åŸå§‹çš„ Thinking ($v_1$)</strong> æ˜¯ $[10, 20]$ã€‚</li>
<li><strong>å¤„ç†åçš„ Thinking</strong> æ˜¯ $[13.6, 23.6]$ã€‚</li>
</ol>
<p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œæ–°çš„å‘é‡ä¸å†ä»…ä»…æ˜¯ â€œThinkingâ€ è‡ªå·±äº†ã€‚å®ƒå‘ â€œMachinesâ€ ($[30, 40]$) çš„æ–¹å‘åç§»äº†ä¸€ç‚¹ç‚¹ã€‚</p>
<p>è¿™å°±æ˜¯ Attention çš„æœ¬è´¨ï¼š<strong>å®ƒè®© â€œThinkingâ€ è¿™ä¸ªè¯ï¼Œå¸æ”¶äº† â€œMachinesâ€ çš„ä¸€éƒ¨åˆ†è¯­ä¹‰ï¼Œå˜æˆäº†ä¸€ä¸ªåŒ…å«äº†ä¸Šä¸‹æ–‡ä¿¡æ¯çš„â€œæ··åˆä½“â€ã€‚</strong></p>
<blockquote>
<p><strong>ğŸ¨ è°ƒè‰²ç›˜æ¯”å–»</strong></p>
<ul>
<li>æœ¬æ¥ $V_1$ æ˜¯<strong>çº¯çº¢è‰²</strong>ï¼Œ$V_2$ æ˜¯<strong>çº¯è“è‰²</strong>ã€‚</li>
<li>Attention å‘Šè¯‰æˆ‘ä»¬ï¼šå– <strong>82% çš„çº¢</strong>ï¼ŒåŠ  <strong>18% çš„è“</strong>ã€‚</li>
<li>æœ€åè¾“å‡ºçš„é¢œè‰²ï¼š<strong>å¸¦ä¸€ç‚¹ç‚¹ç´«è‰²è°ƒçš„çº¢è‰²</strong>ã€‚</li>
</ul>
</blockquote>

                
                </div>
            </div>
        </div>
    </div>
</div>

</body>

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
        tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
        messageStyle: "none"
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>



<!-- Google Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PWRM0QDS7E"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PWRM0QDS7E');
</script>
<!-- End Google Analytics -->


</html>
